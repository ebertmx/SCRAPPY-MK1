@startuml
[*] --> Uncalibrated

state errorfix <<choice>>
state RESET <<end>>

state Uncalibrated {
  [*] --> WaitForInput 
  WaitForInput  --> Calibrating: request from user
  WaitForInput  --> Manual_Motor_Control: User Input
  Calibrating --> Calibrated: Successful Calibration
  Calibrating --> [*]: Failed Calibration
}

state Calibrated {
  [*] --> Standby
  Standby --> ParsingInstruction : Recieve Command
  ParsingInstruction --> Moving : move to position
  ParsingInstruction --> SendingData: Request
 SendingData -->Standby
  state Moving {
     [*]--> SetSpeedDir: Calculate Motor Angles
     SetSpeedDir --> MonitorInput: Initiate Motion
     MonitorInput-->MonitorInput: Motors Busy
     MonitorInput-->Stop: User Interrupt
     MonitorInput-->Stop: Sensor Interrupt


  }
  state Stop{
     Stop-->SendingData: Send SCRAPPY status

  
   }

  Moving-->ErrorState: Error Detected
  ErrorState-->errorfix
  errorfix-->Uncalibrated: Recoverable error
  errorfix-->RESET: unrecoverable error--Reset Required

}
@enduml